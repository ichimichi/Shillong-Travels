<div *ngIf="!loaded" class="loading">
  <div class="rounded-box drop-shadow"> -->
    <div class="content align-left">
      <mat-spinner color="accent"></mat-spinner>
    </div>
  </div>
</div>

<div *ngIf="loaded">
  <mat-card class="card">
    <div class="header-info">
      <mat-card-header class="header">
        <div mat-card-avatar class="header-m-image" *ngIf="myprofile.gender==='male' "> </div>
        <div mat-card-avatar class="header-f-image" *ngIf="myprofile.gender==='female'"> </div>
        <mat-card-title>{{myprofile.firstName}} {{myprofile.lastName}}</mat-card-title>
        <mat-card-subtitle>user</mat-card-subtitle>
      </mat-card-header>
    </div> <br>

    <mat-card-content>


      <div class="info">

        <h4 style="padding-bottom: 10px;" class="edit">
          <span style="color: rgb(59, 59, 59);">e-mail</span> : {{myprofile.email}}
        </h4>

        <button mat-button [disabled]="editMail" (click)="EditMail()" class="editButton" color="accent">
          <mat-icon style="padding-top:8px;">create</mat-icon>
        </button>

        <div *ngIf="editMail" class="form">

          <form [formGroup]="EmailForm" class="form-group">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Enter your new email</mat-label>
              <input matInput formControlName="email">
              <mat-error *ngIf="EmailForm.controls.email.invalid && !EmailForm.controls.email.hasError('required')">
                Enter a valid email address
              </mat-error>
              <mat-error *ngIf="EmailForm.controls.email.hasError('required')">
                Email is required
              </mat-error>
            </mat-form-field> <br>
            <button [disabled]="EmailForm.invalid" mat-button color="accent" (click)="SaveMail()">
              <mat-icon>save</mat-icon>
            </button>
            <button mat-button color="accent" (click)="EditMail()">
              <mat-icon>clear</mat-icon>
            </button>
          </form>
        </div>

        <h4>
          <span style="color: rgb(59, 59, 59);">date of birth</span> : {{myprofile.dateOfBirth| date}}
        </h4>

        <h4 class="edit">
          <span style="color: rgb(59, 59, 59);">phone number</span> : +91 - {{myprofile.phone}}
        </h4>

        <button mat-button [disabled]="editPhone" (click)="EditPhone()" class="editButton" color="accent">
          <mat-icon style="padding-top:7px;">create</mat-icon>
        </button>


        <div *ngIf="editPhone" class="form">
          <form [formGroup]="PhoneForm" class="form-group">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Enter your new phone</mat-label>
              <input matInput formControlName="phoneNo">
              <mat-error *ngIf="PhoneForm.controls.phoneNo.hasError('required')">
                Phone is required
              </mat-error>
              <mat-error *ngIf="PhoneForm.controls.phoneNo.hasError('minlength') || PhoneForm.controls.phoneNo.hasError('maxlength')">
                Number should be of 10 digits
              </mat-error>
            </mat-form-field>
          </form> <br>
          <button mat-button color="accent" [disabled]="PhoneForm.invalid" (click)="SavePhone()">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-button color="accent" (click)="EditPhone()">
            <mat-icon>clear</mat-icon>
          </button>
        </div> <br>

        <button mat-button [disabled]="editPassword" style="color:#fc6805" (click)="EditPassword()">
          <h5 style="margin: 0px">change password</h5>
        </button>

        <div *ngIf="editPassword" class="form">
          <form [formGroup]="PasswordForm" class="form-group">

            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Enter old password</mat-label>
              <input matInput formControlName="opassword" type="password">
              <mat-error *ngIf="PasswordForm.controls.opassword.hasError('required')">
                Old Password is required
              </mat-error>
              <mat-error *ngIf="PasswordForm.controls.opassword.hasError('minlength')">
                Password should be at least 8 characters
              </mat-error>
            </mat-form-field> <br>

            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Enter new password</mat-label>
              <input matInput formControlName="npassword" type="password">
              <mat-error *ngIf="PasswordForm.controls.npassword.hasError('required')">
                New Password is required
              </mat-error>
              <mat-error *ngIf="PasswordForm.controls.npassword.hasError('minlength')">
                Password should be at least 8 characters
              </mat-error>
            </mat-form-field> <br>

          </form>
          <button mat-button color="accent" [disabled]="PasswordForm.invalid" (click)="SavePassword()">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-button color="accent" (click)="EditPassword()">
            <mat-icon>clear</mat-icon>
          </button>
        </div>

      </div>


    </mat-card-content>

  </mat-card>

</div>